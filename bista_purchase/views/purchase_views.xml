<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="purchase_order_form_inherit_added_custom_field" model="ir.ui.view">
        <field name="name">purchase.order.form.inherit.added.custom.fields</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='order_line']//tree" position="inside">
                <field name="tracking_ref" optional="show"/>
                <field name="status_id" readonly="1"/>
                <button name="open_po_line" type="object" icon="fa-eye" class="btn btn-link" style="float:right"/>
                <button name="action_purchase_history" type="object"  icon="fa-history" style="float:left"/>
            </xpath>
            <!--            <xpath expr="//page[@name='products']/field[@name='order_line']" position="before">-->
            <!--                <button name="update_po_lines" string="Update PO Lines" type="object" class="btn-primary"/>-->
            <!--            </xpath>-->

            <!--            <xpath expr="//field[@name='order_line']/tree/field[@name='name']" position="after">-->
            <!--            </xpath>-->
            <!-- <xpath expr="//div[hasclass('oe_clear')]" position="before">
                <group name="special_pick_note" col="6" class="mt-2 mt-md-0">
                    <group colspan="4">
                        <field name="special_pick_note"
                               class="oe-bordered-editor" nolabel="1"
                               placeholder="Special Picking Notes..."/>
                    </group>
                </group>
            </xpath> -->
            <xpath expr="//sheet" position="before">
                <div class="alert alert-danger mb-0" role="alert">
                    <span>Before doing any operations, please check the Nuances.</span>
                </div>
            </xpath>
            <xpath expr="//page[@name='purchase_delivery_invoice']" position="after">
                <page name="po_details" string="PO Details">
                    <field name="sale_order_ids" nolabel="1" readonly="1">
                        <tree>
                            <field name="name"/>
                            <field name="date_order"/>
                            <field name="state"/>
                            <field name="gorgias_ticket"/>
                        </tree>
                    </field>
                    <group>
                        <group name="po_conf">
                            <field name="po_conf" style="max-height: 25px;"/>
                            <field name="hours_process" style="max-height: 20px;"/>
                        </group>
                        <group name="po_clock">
                            <field name="clock_start_override" style="max-height: 20px;"/>
                            <field name="clock_override_reason" style="max-height: 25px;"/>
                        </group>
                    </group>
                    <group class="o_row">
                        <group>
                            <field name="lead_time" no_label="1"/>
                        </group>
                        <span class="oe_read_only">Days</span>
                    </group>
                    <br/>
                    <group class="o_row">
                        <group>
                            <field name="order_process_time" no_label="1"/>
                        </group>
                        <span class="oe_read_only">Days</span>
                    </group>
                </page>
                <page name="review_order_notes_and_requirements" string="Review Order Notes and Requirements">
                    <group name="review_order_notes_and_requirements" string="Review Order Notes and Requirements">
                        <group>
                            <field name="order_notes" style="max-height: 25px;"/>
                        </group>
                        <group>
                            <field name="fulfilment_project"/>
                        </group>
                    </group>
                </page>
                <page name="ops_project_owner" string="Steps and Nuances">
                    <group>
                        <group name="ops_project_owner" string="Ops Project Owner">
                            <field name="ordered_by"/>
                            <field name="ops_project_owner_id"/>
                        </group>
                        <group name="approved_payment" string="Approved Payment">
                            <field name="payment_receive_date"/>
                            <field name="billing_notes" style="max-height: 25px;"/>
                        </group>
                        <group name="confirm_supplier" string="Confirm Supplier">
                            <field name="cc_email"/>
                            <field name="supplier_nuances"/>
                            <field name="minimum_nuances"/>
                            <field name="pre_approval_nuances"/>
                        </group>
                        <group name="dropship_or_transfer" string="Dropship Or Transfer">
                            <!--                            <field name="transfer_to_bookpal_warehouse"/>-->
                            <field name="type"/>
                            <field name="supplier_warehouse"/>
                        </group>
                    </group>
                    <group name="date_delivary_requirements" string="Date And Delivary">
                        <group>
                            <field name="num_of_need_by_days"/>
                            <field name="future_ship_nuances"/>
                            <field name="shipping_nuances"/>
                            <field name="processing_time_nuances"/>
                        </group>
                        <group>
                            <field name="author_event_naunces"/>
                            <field name="author_event_shipping_naunces"/>
                        </group>
                    </group>
                    <group name="shipping_method_instructions" string="Shipping Method and Instructions">
                        <group>
                            <field name="rush_status_id"/>
                            <field name="shipping_instructions"/>
                            <field name="order_shipping_desc"/>
                            <field name="default_supplier_shipping"/>
                            <field name="freight_charges" style="max-height: 25px;"/>
                        </group>
                        <group>
                            <field name="rush_shipping_nuances"/>
                            <field name="shipping_acct_nuances"/>
                            <field name="freight_nuances"/>
                            <field name="opening_text_nuances"/>
                            <field name="note_to_vendor_nuances"/>
                        </group>
                    </group>
                </page>
                <page name="note_details" string="Notes and Details">
                    <group>
                        <group>
                            <field name="memo" style="max-height: 25px;"/>
                        </group>
                        <group>
                            <!--                            <field name="gorgias_ticket" style="max-height: 25px;"/>-->
                        </group>
                    </group>
                </page>
                <page name="financials" string="Financials">
                    <group name="financials" string="Financials">
                        <group>
                            <field name="supplier_order_number"/>
                        </group>
                        <group>
                            <field name="create_uid" string="Created By"/>
                            <field name="write_uid" string="Last Modified By"/>
                        </group>
                    </group>
                </page>
                <page name="shipment_tracking" string="Shipment Tracking"
                      attrs="{'invisible':[('state','not in',['purchase','done'])]}">
                    <button name="open_tracking" type="object" string="Create Tracking" class="btn btn-primary"
                            context="{'new':1}"/>
                    <field name="purchase_tracking_ids" readonly="0">
                        <tree string="Purchase Tracking Tree" create="0" write="0" editable="bottom">
                            <field name="name" readonly="1"/>
                            <field name="shipment_date" required="1" optional="show" readonly="1"/>
                            <field name="carrier_id" optional="show" readonly="1"/>
                            <field name="pro_number" optional="show" readonly="1"/>
                            <field name="status" optional="show" readonly="1"/>
                            <field name="dest_address_id" invisible="1"/>
                            <button name="edit_tracking_line" icon="fa-edit" type="object" class="btn-link"
                                    style="float:right"/>
                            <button name="send_email" string="Send Email" type="object" class="btn-primary"
                                    attrs="{'invisible': ['|', ('dest_address_id', '=', False), ('status', 'in', ['received', 'on_hold'])]}"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>

    <record id="purchase_order_line_form" model="ir.ui.view">
        <field name="name">purchase.order.line.form</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <form name="purchase_order_line" string="PO Line" create="false" edit="false">

                <!--                <header>-->
                <!--                    <field name="status" widget="statusbar"-->
                <!--                           statusbar_visible="draft,ready_for_preview,ordered,pending,completed" readonly="1"/>-->
                <!--                </header>-->
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="order_id"/>
                        </h1>
                    </div>
                    <!--                    <group>-->
                    <!--                        <field name="name"/>-->
                    <!--                    </group>-->
                    <group>
                        <group>
                            <field name="product_id"/>
                            <field name="product_qty"/>
                            <!--                            <field name="product_uom"/>-->

                            <field name="price_unit"/>
                            <field name="discount"/>
                            <field name="taxes_id" widget="many2many_tags"/>
                            <field name="price_subtotal"/>
                        </group>
                        <group>
                            <field name="date_planned"/>
                            <field name="disc_price_unit"/>
                            <field name="qty_received"/>
                            <field name="qty_invoiced"/>
                            <field name="status_id"/>
                        </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
                <footer>
                    <button string="Close" special="cancel" class="btn btn-primary"/>
                </footer>
            </form>
        </field>
    </record>
    <record id="po_status_line_form_view" model="ir.ui.view">
        <field name="name">po_status_line_form_view</field>
        <field name="model">po.status.line</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <group>
                        <field name="manual_update" string="Manually Update ?" groups="base.group_no_one"/>
                        <field name="active" invisible="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record id="po_status_line_tree_view" model="ir.ui.view">
        <field name="name">po.status.tree.view</field>
        <field name="model">po.status.line</field>
        <field name="arch" type="xml">
            <tree>
                <field name="sequence" widget="handle"/>
                <field name="name"/>
                <field name="manual_update" invisible="1" groups="base.group_no_one"/>
            </tree>
        </field>
    </record>
    <record id="po_status_line_action" model="ir.actions.act_window">
        <field name="name">Product Line Status</field>
        <field name="res_model">po.status.line</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem
            id="po_status_line_menu"
            action="po_status_line_action"
            parent="purchase.menu_product_in_config_purchase"
            sequence="4"/>
</odoo>
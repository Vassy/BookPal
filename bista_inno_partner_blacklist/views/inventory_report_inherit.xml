<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="quant_search_view_inherit" model="ir.ui.view">
            <field name="name">stock.quant.search.inherit</field>
            <field name="model">stock.quant</field>
            <field name="inherit_id" ref="stock.quant_search_view" />
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='to_apply']" position="after">
                    <separator/>
                    <filter string="Not Virtual Location" name="not_v_location_id" domain="[('location_id.name', '!=', 'Virtual Locations'),('location_id.location_id.name', '!=', 'Virtual Locations')]" />
                    <separator/>
                    <filter string="Not Expired Location" name="not_e_location_id" domain="[('location_id.name', '!=', 'Expired'),('location_id.location_id.name', '!=', 'Expired')]" />
                </xpath>
            </field>
        </record>

        <record model="ir.actions.server" id="stock.action_view_quants"> <!-- Menu + python -->
            <field name="name">Inventory</field>
            <field name="model_id" ref="stock.model_stock_quant"/>
            <field name="state">code</field>
            <field name="groups_id" eval="[(4, ref('stock.group_stock_user'))]"/>
            <field name="code">
                action = model.with_context(
                    search_default_internal_loc=1,
                    search_default_not_v_location_id=1,
                    search_default_not_e_location_id=1,
                    search_default_productgroup=1,
                    search_default_locationgroup=1,
                ).action_view_quants()
            </field>
        </record>
    
        <record model="ir.actions.act_window" id="stock.dashboard_open_quants"> <!-- Used in dashboard -->
            <field name="name">Update Quantity</field>
            <field name="context">{'search_default_internal_loc': 1,'search_default_not_v_location_id': 1 ,'search_default_not_e_location_id': 1 , 'search_default_productgroup':1, 'search_default_locationgroup':1, 'inventory_mode':True}</field>
            <field name="res_model">stock.quant</field>
            <field name="view_id" ref="stock.view_stock_quant_tree_editable"/>
        </record>
    </data>
</odoo>
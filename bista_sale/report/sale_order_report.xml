<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="custom_session_header_footer">
        <t t-set="company" t-value="user.company_id"/>
        <div class="header">
            <div class="row" style="font-family: 'Trebuchet MS', sans-serif;">
                <div class="col-5 mb4">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 80px;"
                         alt="Logo"/>
                </div>

                <div class="col-5 mb4 text-right">
                    <div>
                        <span style="padding-top:30px;" t-if="doc.state not in ['draft','sent']">
                            <h3 style="padding-top:30px;">Order</h3>
                        </span>
                        <span t-if="doc.state in ['draft','sent']">
                            <h3>Quotation</h3>
                        </span>
                    </div>
                </div>
            </div>
            <div t-if="company.logo or company.report_header" class="row zero_min_height">
            </div>
            <div class="row">
                <div style="margin-top:50px" class="col-4">
                    <span t-if="doc.state in ['draft','sent']">
                        <div style="margin-top:50px;">
                            <p>Quote Number
                            </p>
                        </div>
                    </span>
                    <span t-if="doc.state not in ['draft','sent']">
                        <div>
                            <strong>Order Number
                            </strong>
                        </div>
                    </span>
                </div>
                <div style="margin-top:50px" class="col-3">
                    <strong>
                        <span class="text-left" t-field="doc.name"/>
                    </strong>
                </div>
            </div>
        </div>
        <div class="article o_report_layout_standard" t-att-data-oe-model="doc and doc._name"
             t-att-data-oe-id="doc and doc.id">
            <div class="pt-5">
                <!-- This div ensures that the address is not cropped by the header. -->
                <t t-call="web.address_layout"/>
            </div>
            <t t-out="0"/>
        </div>

        <div class="footer">
            <div class="text-center" style="border-top: 1px solid black;">
                <ul class="list-inline mb4 text-nowrap">
                    <li t-if="company.phone" class="list-inline-item d-inline">Phone:
                        <span class="o_force_ltr" t-field="company.phone"/>
                    </li>
                    <li t-if="company.email" class="list-inline-item d-inline">Email:
                        <span t-field="company.email"/>
                    </li>
                    <li t-if="company.website" class="list-inline-item d-inline">Web:
                        <span t-field="company.website"/>
                    </li>
                    <li t-if="company.vat" class="list-inline-item d-inline"><t
                            t-esc="company.country_id.vat_label or 'Tax ID'"/>:
                        <span t-field="company.vat"/>
                    </li>
                </ul>
            </div>
        </div>
    </template>
    <template id="report_quotation_inherit_new" inherit_id="sale.report_saleorder_document">
        <xpath expr="//t[@t-call='web.external_layout']" position="attributes">
            <attribute name="t-call">bista_sale.custom_session_header_footer</attribute>
        </xpath>
        <xpath expr="//div[@t-field='doc.partner_id']" position="replace">
        </xpath>
        <xpath expr="//div[hasclass('page')]" position="before">
            <div class="row">
                <div class="col-5">
                    <span>
                        <div>
                            <h6>Created Date:
                                <t t-esc="doc.date_order.strftime('%d th %B %Y')"/>
                            </h6>
                        </div>
                    </span>
                    <span>
                        <div>
                            <t t-if="doc.validity_date">
                                <h6>Valid Until:
                                    <t t-esc="doc.validity_date.strftime('%d th %B %Y')"/>
                                </h6>
                            </t>
                        </div>
                    </span>
                </div>
                <div class="col-3">
                </div>
                <div class="col-4">

                    <table style="margin-top:50px;margin-left:10px;border: 1px solid;width: 100%;">
                        <thead>
                            <tr>
                                <th scope="col">Ship To Address</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row" style="border: 1px solid;">
                                    <div style=" font-weight: normal;" t-field="doc.partner_id"
                                         t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                                </th>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[@name='expiration_date']" position="replace">
        </xpath>

        <xpath expr="//p[@t-field='doc.user_id']" position='replace'>
        </xpath>
        <xpath expr="//div[@t-if='doc.user_id.name']" position="replace">
        </xpath>

        <xpath expr="//h2[hasclass('mt16')]" position="replace">
        </xpath>
        <xpath expr="//div[@id='informations']" position="replace">

        </xpath>


        <xpath expr="//table[hasclass('table','table-sm','o_main_table')]" position="before">
            <div style="margin-bottom:60px;">
                <h5 style="margin-top:50px;border-bottom:solid 1px;">Special Instructions and Notes</h5>
                <div>
                    <span t-field="doc.common_pick_note"/>
                </div>
            </div>
        </xpath>
        <xpath expr="//td[@name ='td_name']" position="before">
            <td>
                <img t-attf-src="data:image/*;base64,{{line.product_id.image_1920}}"
                     style="max-height:100px; max-width:100px;"/>
            </td>
        </xpath>

        <xpath expr="//td[@name ='td_name']" position="replace">
            <td>
                <b>
                    <span t-field="line.product_id.name"/>
                </b>
                <br/>
                <span t-field="line.product_id.default_code"/>
                <br/>
                <span>format:</span>
                <!--                <span t-field="line.product_id.format"/>-->
                <br/>
                <div>
                    <b>
                        <span>Product Notes:</span>
                    </b>
                    <br/>
                    <span t-field="line.picking_note"/>
                </div>
            </td>
        </xpath>
        <!--        table-->


        <xpath expr="//table[hasclass('table','table-sm','o_main_table')]//thead//tr[1]//th[1]" position="before">
            <th name="sequence_id" class="text-left">Product Details</th>
        </xpath>


        <xpath expr="//th[@name='th_priceunit']" position="replace">
            <th class="text-center">Price</th>
        </xpath>

        <xpath expr="//th[@name='th_quantity']" position="after">
            <th class="text-center">Cover</th>
        </xpath>

        <xpath expr="//span[@t-field='line.product_uom_qty']" position="after">
            <td class="text-right">
                <s>
                    <span class="text-right" t-field="line.product_id.standard_price"/>
                </s>
            </td>
        </xpath>
        <xpath expr="//th[@name='th_subtotal']" position="replace">
            <th class="text-right">Total</th>
        </xpath>

        <xpath expr="//th[@name='th_taxes']" position="replace">
            <th class="text-right"></th>
        </xpath>
        <xpath expr="//span[@t-field='line.product_uom']" position="replace">

        </xpath>

        <xpath expr="//td[@name='td_taxes']" position="replace">
            <th class="text-right"></th>
        </xpath>
        <xpath expr="//th[@name='th_description']" position="replace">
            <th class="text-right"></th>
        </xpath>
        <xpath expr="//p[@t-field='doc.note']" position="replace">
            <h5 style="border-bottom:solid 1px;">Order Terms and Conditions</h5>
            <div style="margin-top:10px;margin-bottom:10px;">
                <span t-field="doc.note"/>
            </div>

        </xpath>
        <xpath expr="//div[@name='so_total_summary']//table[hasclass('table')]" position="replace">
            <table class="table table-borderless">

                <tr>
                    <td class="text-right">
                        <strong>Subtotal</strong>
                    </td>
                    <td class="text-right">
                         <span t-field="doc.amount_untaxed"/>
                    </td>
                </tr>
                <tr>
                    <td class="text-right">
                        <strong class="text-right">Tax</strong>
                    </td>
                    <td class="text-right">
                         <span t-field="doc.amount_tax"/>
                    </td>
                </tr>
                <tr>
                    <td class="text-right">
                        <strong class="text-right">Shipping</strong>
                    </td>
                    <td class="text-right">
                        <!--                    <span t-esc="tax_totals['formatted_amount_total']"/>-->
                    </td>
                </tr>
                <tr>
                    <td class="text-right">
                        <strong class="text-right">Total</strong>
                    </td>
                    <td class="text-right">
                        <span t-field="doc.amount_total"/>

                        <!--                         <span t-field="doc.amount_untaxed"/>
-->
                    </td>
                </tr>
            </table>
        </xpath>
    </template>



</odoo>